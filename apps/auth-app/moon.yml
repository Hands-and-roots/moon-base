type: 'application'
language: 'typescript'
tags: ['next']

fileGroups:
  app:
    - 'pages/**/*'
    - 'next-env.d.ts'
    - 'next.config.*'

  storybook:
    - 'app/**/*'
    - 'stories/**/*'
    - 'tests/**/*'
    - '.storybook/**/*'

tasks:
  build:
    command: 'next build'
    inputs:
      - '@group(app)'
      - '@group(sources)'

  # export:
  #   command: 'next export -o ./build'
  #   deps:
  #     - 'build'
  #   inputs:
  #     - '@group(app)'
  #     - '@group(sources)'
  #   outputs:
  #     - '.next'
  #     - 'build'

  dev:
    command: 'next dev'
    local: true

  start:
    command: 'next start'
    local: true

  lint:
    args:
      # Enable caching for this project
      - '--cache'

  buildStorybook:
    command: 'storybook build --output-dir @out(0)'
    inputs:
      - '@group(storybook)'
    outputs:
      - 'build'

  storybook:
    local: true
    command: 'storybook dev -p 6006'
    inputs:
      - '@group(storybook)'
